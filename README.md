# Years of Lead

> An advanced psychological insurgency simulator featuring deep agent relationships, emotional modeling, emergent narrative generation, and sophisticated reputation systems through complex social network dynamics.

[![Python](https://img.shields.io/badge/Python-3.12+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Status](https://img.shields.io/badge/Status-Alpha%20v0.5.0-orange.svg)](https://github.com/yourusername/years-of-lead)
[![Tests](https://img.shields.io/badge/Tests-50/50%20Passing-brightgreen.svg)](tests/)
[![Pre-commit](https://img.shields.io/badge/Pre--commit-Enabled-brightgreen.svg)](.pre-commit-config.yaml)

## ‚ú® Overview

**Years of Lead** is a high-complexity insurgency simulation that models human psychology, social networks, reputation dynamics, and emergent storytelling through sophisticated agent interactions. Built with trauma-informed design principles and integrated with symbolic narrative logic, the system creates authentic relationship dynamics where trust, loyalty, betrayal, public perception, and emotional contagion drive emergent gameplay.

The simulation combines advanced psychological modeling with political insurgency mechanics, creating stories that emerge naturally from agent relationships rather than scripted events. Every interaction matters, every secret has consequences, every betrayal reshapes the social fabric, and every action affects public reputation in the resistance movement.

### üß† Core Philosophy
- **Trauma-Informed Design**: Respectful modeling of psychological complexity and emotional states
- **Emergent Narratives**: Stories emerge from agent interactions rather than scripted events
- **Social Network Realism**: Authentic relationship dynamics with trust, loyalty, and betrayal
- **Reputation Dynamics**: Public perception and media influence on faction operations
- **Symbolic Integration**: SYLVA/WREN compatible for therapeutic and educational applications

## üöÄ Features

### üï∏Ô∏è **Dynamic Social Networks**
- **Bidirectional Relationship Graphs**: Complex social connections with influence mapping
- **Multi-Dimensional Metrics**: Trust (0.0-1.0), Loyalty (0.0-1.0), Affinity (-100 to +100)
- **Relationship Decay**: Natural drift toward neutrality unless actively reinforced
- **Social Circle Analysis**: Filter relationships by bond type, influence radius, and faction membership
- **Advanced Relationship Systems**: 6 sophisticated relationship mechanics (secrets, betrayal, memory, etc.)

### üèÜ **Reputation & Public Perception**
- **Multi-Layer Reputation System**: Fame, infamy, and public sentiment tracking
- **Media Influence Mechanics**: News coverage affects public opinion and faction operations
- **Government Response Modeling**: State reactions to resistance activities
- **NPC Memory Systems**: Persistent public memory of significant events
- **Political Pressure Dynamics**: Reputation affects search probability and dialogue modifiers

### ü§ê **Secrets & Information Warfare**
- **6 Secret Categories**: Personal, Operational, Political, Criminal, Emotional, Strategic
- **Rumor Propagation**: Network-based secret spreading with success probability modeling
- **Emotional Blackmail**: Strategic weaponization of secrets with resistance mechanics
- **Discovery Events**: Dynamic revelation systems with relationship consequences
- **Information Network Topology**: Secret flow analysis and vulnerability mapping

### üé≠ **Persona Masks & Deception**
- **Strategic Mask Systems**: Agents hide true feelings behind calculated personas
- **Empathy-Based Detection**: Skill-based mask penetration with relationship strength factors
- **Social Manipulation**: Deliberate relationship deception for tactical advantage
- **Betrayal Integration**: Persona mechanics feed directly into betrayal planning systems
- **Emotional Contagion**: Masked emotions still influence nearby agents

### üìù **Memory & Emotional Journaling**
- **Emotional Memory Logs**: Persistent journals of impactful events with emotional scoring
- **Time-Based Memory Decay**: Configurable fading rates with trauma persistence
- **Narrative Memory Integration**: Past experiences influence future relationship events
- **Shared Memory Networks**: Collective memories affecting group dynamics
- **Trauma Persistence**: Special decay resistance for psychologically significant events

### üèõÔ∏è **Political Fracture Mechanics**
- **Real-Time Cohesion Monitoring**: Continuous faction internal stability measurement
- **Automatic Fracture Triggers**: Splinter cell generation when cohesion drops below 0.3
- **Agent Migration Systems**: Defectors form new factions with resource reallocation
- **Ideological Drift Tracking**: 6-dimensional belief evolution through social exposure
- **Leadership Succession**: Dynamic authority structures with power transfer mechanics

### üîÄ **Betrayal Planning Engine**
- **Multi-Factor Triggers**: Trust thresholds, stress levels, ideological distance, faction loyalty
- **Co-conspirator Networks**: Identification of potential betrayal allies through relationship analysis
- **Strategic Timing**: Preferred betrayal moments (immediate, during mission, post-success)
- **Continuous Activation Monitoring**: Real-time evaluation of betrayal plan viability
- **Betrayal Aftermath**: Complex consequences for all involved parties

## üß† Agent Simulation

### üë• **Sophisticated Agent Modeling**
- **10+ Background Types**: Veteran, Student, Journalist, Worker, Organizer, Insider, Academic, Artist, Exile, Militant
- **8 Skill Categories**: Combat, Stealth, Hacking, Persuasion, Intelligence, Demolitions, Medical, Leadership
- **Plutchik Emotion Model**: 8 basic emotions (joy, trust, fear, surprise, sadness, disgust, anger, anticipation)
- **6-Dimensional Ideology**: Radical, Pacifist, Individualist, Traditional, Nationalist, Materialist vectors
- **Dynamic Personality Evolution**: Agents change over time based on experiences and relationships

### üß¨ **Psychological Complexity**
- **Emotional Contagion**: Emotions spread through positive relationships over time
- **Trauma Integration**: Persistent traumatic memories with special decay resistance
- **Stress Response Systems**: Dynamic stress accumulation affecting decision-making
- **Social Tag Inheritance**: Background and faction-based personality markers
- **Emotional Geography**: Location-based emotional state influences

### üìä **Behavioral Dynamics**
- **Trust Evolution**: Dynamic trust building and erosion through interactions
- **Loyalty Shifts**: Faction loyalty influenced by relationships and ideological alignment
- **Memory-Driven Decisions**: Past experiences shape future behavioral choices
- **Persona Management**: Strategic emotional presentation for social advantage
- **Adaptive Learning**: Agents learn from successful and failed interactions

## üìö Narrative Engine

### üé¨ **Hybrid Template System**
- **50+ Narrative Templates**: Comprehensive event coverage with variable substitution
- **Advanced Context Resolution**: Agent names, emotions, locations dynamically filled
- **Anti-Repetition Logic**: Template usage tracking ensures narrative variety
- **Hierarchical Fallbacks**: Graceful degradation when specific contexts unavailable
- **Dynamic Tone Adaptation**: Narrative style adapts to emotional context

### üìñ **Dynamic Story Generation**
- **Relationship-Driven Events**: Narratives emerge from current agent social dynamics
- **Emotional Context Integration**: Story tone matches agent emotional states
- **Memory-Influenced Narratives**: Past events affect future story generation
- **Cross-System Integration**: Secrets, betrayals, memories, and reputation create narrative hooks
- **Emergent Plot Threads**: Complex storylines develop from simple interactions

### üé≠ **Event Categories**
- **Relationship Events**: Trust building, loyalty tests, emotional bonding
- **Secret Revelation**: Discovery mechanics with relationship consequences
- **Betrayal Narratives**: Planning, execution, and aftermath storytelling
- **Memory Formation**: Significant event recording with emotional impact
- **Ideological Conflict**: Belief system clashes and evolution stories
- **Reputation Events**: Media coverage, public reactions, government responses

## üß¨ Symbolic Systems

### üîó **SYLVA/WREN Integration Hooks**
- **Symbolic Narrative Enhancement**: Prepared integration points for symbolic logic
- **Therapeutic Framework Stubs**: Mental health application connection points
- **Emotional Regulation Modeling**: Healthy coping mechanism simulation
- **Dream Logic Integration**: Subconscious narrative element support
- **Symbolic Pattern Recognition**: Archetypal story structure identification

### üåê **Network Analysis Systems**
- **Social Graph Algorithms**: Influence mapping and cluster detection
- **Emotional Flow Analysis**: Contagion pattern recognition and prediction
- **Secret Network Topology**: Information flow and vulnerability analysis
- **Memory Network Mapping**: Shared experience connection visualization
- **Reputation Network Dynamics**: Public perception flow and influence tracking

### üîÆ **Emergent Pattern Recognition**
- **Relationship Trend Analysis**: Historical evolution tracking and prediction
- **Faction Health Monitoring**: Early warning systems for instability
- **Betrayal Risk Assessment**: Multi-factor loyalty breakdown probability
- **Narrative Quality Metrics**: Story coherence and engagement scoring
- **Reputation Impact Prediction**: Media influence forecasting

## üìà Faction Dynamics

### üèõÔ∏è **Multi-Faction Politics**
- **Complex Inter-Faction Relationships**: Dynamic alliances and hostilities
- **Resource Competition**: Money, influence, and personnel management
- **Public Opinion Integration**: Sentiment tracking affecting faction power
- **Coalition Formation**: Temporary alliances based on shared interests
- **Reputation-Based Alliances**: Public perception influences faction cooperation

### üìä **Internal Faction Management**
- **Cohesion Monitoring**: Real-time internal relationship strength measurement
- **Leadership Dynamics**: Authority structures and succession planning
- **Ideological Coherence**: Belief system alignment within factions
- **Defection Risk Assessment**: Early warning for agent loyalty breakdown
- **Reputation Management**: Faction-level public perception strategies

### üîÑ **Dynamic Faction Evolution**
- **Automatic Fracture Mechanics**: Splinter groups form when cohesion drops
- **Agent Migration Systems**: Organic movement between factions
- **Resource Reallocation**: Economic consequences of faction changes
- **Narrative Faction Events**: Story-driven faction relationship evolution
- **Reputation Cascades**: Faction reputation changes affect member loyalty

## üîß Architecture

### üìÅ **Core Module Structure**
```
src/game/
‚îú‚îÄ‚îÄ entities.py                 # Base dataclasses (Agent, GameState, Faction, Relationship)
‚îú‚îÄ‚îÄ core.py                     # Main simulation engine and turn processing
‚îú‚îÄ‚îÄ relationships.py            # Social network graph and basic relationship logic
‚îú‚îÄ‚îÄ advanced_relationships.py   # 6 advanced relationship systems (secrets, betrayal, etc.)
‚îú‚îÄ‚îÄ emotional_state.py          # Plutchik emotion model with trauma integration
‚îú‚îÄ‚îÄ narrative_engine.py         # Hybrid template system with variable substitution
‚îú‚îÄ‚îÄ events.py                   # Event system with contextual narrative modification
‚îú‚îÄ‚îÄ reputation_system.py        # Public perception, media, and government response systems
‚îú‚îÄ‚îÄ legal_system.py             # Legal consequences and law enforcement mechanics
‚îú‚îÄ‚îÄ support_networks.py         # Support network analysis and management
‚îî‚îÄ‚îÄ geography.py                # Location-based emotional and social dynamics
```

### üß™ **Testing & Quality Assurance**
```
tests/
‚îú‚îÄ‚îÄ unit/                       # Comprehensive unit tests (50/50 passing)
‚îÇ   ‚îú‚îÄ‚îÄ test_advanced_relationships_test.py
‚îÇ   ‚îú‚îÄ‚îÄ test_reputation_system_test.py
‚îÇ   ‚îú‚îÄ‚îÄ test_emotional_state_test.py
‚îÇ   ‚îî‚îÄ‚îÄ test_narrative_engine_test.py
‚îú‚îÄ‚îÄ maintenance/                # Scenario-based system integrity validation
‚îú‚îÄ‚îÄ integration/               # Cross-system interaction testing
‚îî‚îÄ‚îÄ e2e/                       # End-to-end simulation testing
```

### üìä **Performance & Monitoring**
- **Health Metrics**: Automated system stability assessment (Œî > +0.2)
- **Emotional Drift Optimization**: ‚â§0.01 per turn for realistic psychological change
- **Trauma Persistence**: 0.5+ accumulation factor for meaningful impact
- **Narrative Variety**: >0.7 uniqueness score preventing repetition
- **Reputation Decay**: Realistic public memory fading rates
- **Memory Performance**: Efficient large-scale agent relationship tracking

### üîó **Integration Architecture**
- **Entity-Component-System**: Maximum modularity and extensibility
- **Event-Driven Design**: Relationship changes trigger narrative updates
- **SYLVA/WREN Stubs**: Symbolic and therapeutic integration points
- **Circular Import Resolution**: Clean dependency management via entities.py
- **Pre-commit Hooks**: Automated code quality and formatting enforcement

## üõ†Ô∏è Getting Started

### Prerequisites
- Python 3.12 or higher
- pip package manager
- Git (for version control)

### Quick Installation
```bash
# Clone the repository
git clone https://github.com/yourusername/years-of-lead.git
cd years-of-lead

# Set up virtual environment
python -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate

# Install dependencies
pip install -r requirements.txt

# Install development dependencies (optional)
pip install -r requirements-dev.txt

# Install pre-commit hooks
pre-commit install
```

### Running the Simulation
```bash
# Run the main simulation
python play_years_of_lead.py

# Test relationship systems
python test_relationship_system.py

# Test reputation system
python test_character_creation.py

# Run comprehensive test suite
python -m pytest tests/ -v

# Run specific test categories
python -m pytest tests/unit/ -v
python -m pytest tests/integration/ -v
python -m pytest tests/maintenance/ -v
```

### Basic Usage Example
```python
from src.game.core import GameState
from src.game.advanced_relationships import AdvancedRelationshipManager
from src.game.reputation_system import ReputationSystem

# Initialize sophisticated simulation
game_state = GameState()
game_state.initialize_game()

# Process advanced relationship mechanics
game_state.advance_turn()

# Generate context-aware narratives
agent_a = game_state.agents["agent_maria"]
agent_b = game_state.agents["agent_sofia"]
narrative = game_state.narrative_engine.generate_advanced_narrative(agent_a, agent_b)
print(narrative)

# Analyze social network dynamics
relationship_manager = game_state.relationship_manager
cohesion = relationship_manager.calculate_faction_cohesion("the_resistance")
secrets = relationship_manager.get_active_secrets()
betrayal_risks = relationship_manager.assess_betrayal_risks()

# Check reputation system
reputation_system = game_state.reputation_system
public_sentiment = reputation_system.get_public_sentiment()
media_mentions = reputation_system.get_recent_media_mentions()
```

### Development Environment
```bash
# Install development dependencies
pip install -r requirements-dev.txt

# Run with debugging
python debug_new_features.py

# Monitor system health
python run_maintenance.py

# Format and lint code
pre-commit run --all-files

# Run specific pre-commit hooks
pre-commit run --files src/game/reputation_system.py
```

## üìä System Health & Metrics

### üéØ **Quality Assurance**
- **Test Coverage**: 50/50 tests passing with comprehensive coverage
- **Code Quality**: Pre-commit hooks enforce formatting and linting standards
- **Performance**: Optimized for large-scale agent simulations
- **Memory Management**: Efficient relationship and memory tracking
- **Error Handling**: Robust error recovery and graceful degradation

### üìà **Monitoring & Validation**
- **Automated Testing**: Continuous integration with GitHub Actions
- **Health Metrics**: Real-time system stability assessment
- **Performance Profiling**: Memory and CPU usage optimization
- **Regression Testing**: Automated detection of breaking changes
- **Documentation**: Comprehensive API and system documentation

## ü§ù Contributing

We welcome contributions! Please see our [Contributing Guidelines](CONTRIBUTING.md) for details on:

- Code style and formatting standards
- Testing requirements
- Pull request process
- Development workflow
- Community guidelines

### Development Workflow
1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests for new functionality
5. Run the test suite
6. Submit a pull request

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üôè Acknowledgments

- **Trauma-Informed Design**: Built with respect for psychological complexity
- **SYLVA/WREN Integration**: Prepared for symbolic and therapeutic applications
- **Open Source Community**: Built on the shoulders of countless contributors
- **Academic Research**: Informed by social psychology and network theory

---

**Years of Lead** - Where every relationship matters, every secret has power, every reputation shapes the future, and the revolution is deeply personal.

*"In the end, it's not about ideology or tactics‚Äîit's about the people who stand with you when trust breaks down, the masks come off, and the world is watching."*

---

**Latest Updates**:
- ‚úÖ Phase 1: Agent Autonomy Enhancement - Completed
- ‚úÖ Phase 2: Mission Outcome Enhancement - Completed
- ‚úÖ Phase 3: Real-time Intelligence Systems - Completed
- üîÑ Phase 4: Dynamic Narrative Generation - Ready to Begin
- ‚úÖ Reputation System v1.0 implemented
- ‚úÖ Pre-commit hooks configured for code quality
- ‚úÖ Enhanced test coverage (50/50 tests passing)
- ‚úÖ Improved documentation and architecture
- ‚úÖ Enhanced Mission & Intelligence Systems Integration
